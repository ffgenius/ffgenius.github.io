<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MySQL | 不要额外加糖</title>
    <meta name="description" content="专门收集本人的学习笔记">
    <meta name="generator" content="VitePress v1.0.0-rc.45">
    <link rel="preload stylesheet" href="/assets/style.qvoDju8c.css" as="style">
    
    <script type="module" src="/assets/app.Bqrr86YF.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Bu8hRsVA.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/framework.B8AjFLjL.js">
    <link rel="modulepreload" href="/assets/chunks/theme.Dd_GTAUI.js">
    <link rel="modulepreload" href="/assets/note_mysql.md.BvOVuuF9.lean.js">
    <link rel="icon" href="./static/img/favicon.ico">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5d98c3a5><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0f60ec36></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0f60ec36> Skip to content </a><!--]--><!----><header class="VPNav" data-v-5d98c3a5 data-v-ae24b3ad><div class="VPNavBar has-sidebar" data-v-ae24b3ad data-v-19c990f1><div class="wrapper" data-v-19c990f1><div class="container" data-v-19c990f1><div class="title" data-v-19c990f1><div class="VPNavBarTitle has-sidebar" data-v-19c990f1 data-v-ab179fa1><a class="title" href="/" data-v-ab179fa1><!--[--><!--]--><!--[--><img class="VPImage logo" src="./static/img/favicon.ico" alt data-v-8426fc1a><!--]--><span data-v-ab179fa1>不要额外加糖</span><!--[--><!--]--></a></div></div><div class="content" data-v-19c990f1><div class="content-body" data-v-19c990f1><!--[--><!--]--><div class="VPNavBarSearch search" data-v-19c990f1><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索文档"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">搜索文档</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-19c990f1 data-v-7f418b0f><span id="main-nav-aria-label" class="visually-hidden" data-v-7f418b0f>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-7f418b0f data-v-42ef59de><!--[--><span data-v-42ef59de>首页</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/blog/2022-05-28.html" tabindex="0" data-v-7f418b0f data-v-42ef59de><!--[--><span data-v-42ef59de>个人博客</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-19c990f1 data-v-e6aabb21><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-e6aabb21 data-v-d1f28634 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-d1f28634></span><span class="vpi-moon moon" data-v-d1f28634></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-19c990f1 data-v-0394ad82 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/ffgenius" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-eee4e7cb><span class="vpi-social-github" /></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-19c990f1 data-v-d0bd9dde data-v-b6c34ac9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-b6c34ac9><span class="vpi-more-horizontal icon" data-v-b6c34ac9></span></button><div class="menu" data-v-b6c34ac9><div class="VPMenu" data-v-b6c34ac9 data-v-e7ea1737><!----><!--[--><!--[--><!----><div class="group" data-v-d0bd9dde><div class="item appearance" data-v-d0bd9dde><p class="label" data-v-d0bd9dde>Appearance</p><div class="appearance-action" data-v-d0bd9dde><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-d0bd9dde data-v-d1f28634 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-d1f28634></span><span class="vpi-moon moon" data-v-d1f28634></span><!--]--></span></span></button></div></div></div><div class="group" data-v-d0bd9dde><div class="item social-links" data-v-d0bd9dde><div class="VPSocialLinks social-links-list" data-v-d0bd9dde data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/ffgenius" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-eee4e7cb><span class="vpi-social-github" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-19c990f1 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><div class="divider" data-v-19c990f1><div class="divider-line" data-v-19c990f1></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-5d98c3a5 data-v-a6f0e41e><div class="container" data-v-a6f0e41e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-a6f0e41e><span class="vpi-align-left menu-icon" data-v-a6f0e41e></span><span class="menu-text" data-v-a6f0e41e>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-a6f0e41e data-v-d2ecc192><button data-v-d2ecc192>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-5d98c3a5 data-v-575e6a36><div class="curtain" data-v-575e6a36></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-575e6a36><span class="visually-hidden" id="sidebar-aria-label" data-v-575e6a36> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-575e6a36><section class="VPSidebarItem level-0" data-v-575e6a36 data-v-93e7e794><div class="item" role="button" tabindex="0" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><h2 class="text" data-v-93e7e794>读书笔记</h2><!----></div><div class="items" data-v-93e7e794><!--[--><div class="VPSidebarItem level-1 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="../note/ajax.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>Ajax</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="../note/axios.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>Axios</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="../note/fetch.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>Fetch</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="../note/git.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>Git</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="../note/less.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>Less</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="../note/sass.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>Sass</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="../note/regexp.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>Regexp</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="../note/webpack.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>Webpack</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="../note/uniapp.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>Uni-app</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="../note/ts.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>Ts</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="../note/vue2.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>Vue2</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="../note/vue3.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>Vue3</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="../note/react.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>React</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="../note/nest.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>Nest</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="../note/mysql.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>Mysql</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-93e7e794 data-v-93e7e794><div class="item" data-v-93e7e794><div class="indicator" data-v-93e7e794></div><a class="VPLink link link" href="../note/rust.html" data-v-93e7e794><!--[--><p class="text" data-v-93e7e794>Rust</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-5d98c3a5 data-v-1428d186><div class="VPDoc has-sidebar has-aside" data-v-1428d186 data-v-39a288b8><!--[--><!--]--><div class="container" data-v-39a288b8><div class="aside" data-v-39a288b8><div class="aside-curtain" data-v-39a288b8></div><div class="aside-container" data-v-39a288b8><div class="aside-content" data-v-39a288b8><div class="VPDocAside" data-v-39a288b8 data-v-3f215769><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" role="navigation" data-v-3f215769 data-v-935f8a84><div class="content" data-v-935f8a84><div class="outline-marker" data-v-935f8a84></div><div class="outline-title" role="heading" aria-level="2" data-v-935f8a84>当前目录</div><nav aria-labelledby="doc-outline-aria-label" data-v-935f8a84><span class="visually-hidden" id="doc-outline-aria-label" data-v-935f8a84> Table of Contents for current page </span><ul class="VPDocOutlineItem root" data-v-935f8a84 data-v-b933a997><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-39a288b8><div class="content-container" data-v-39a288b8><!--[--><!--]--><main class="main" data-v-39a288b8><div style="position:relative;" class="vp-doc _note_mysql" data-v-39a288b8><div><h1 id="mysql" tabindex="-1">MySQL <a class="header-anchor" href="#mysql" aria-label="Permalink to &quot;MySQL&quot;">​</a></h1><h2 id="基础" tabindex="-1">基础 <a class="header-anchor" href="#基础" aria-label="Permalink to &quot;基础&quot;">​</a></h2><h3 id="mysql概述" tabindex="-1">MySQL概述 <a class="header-anchor" href="#mysql概述" aria-label="Permalink to &quot;MySQL概述&quot;">​</a></h3><h4 id="关系型数据库" tabindex="-1">关系型数据库 <a class="header-anchor" href="#关系型数据库" aria-label="Permalink to &quot;关系型数据库&quot;">​</a></h4><p>概念：建立在关系模型基础上，由多张相互连接的二维表组成的数据库</p><p>特点：</p><ul><li>使用表存储数据，格式统一，便于维护</li><li>使用 <code>SQL</code> 语言操作，标准统一，使用方便</li></ul><h3 id="sql" tabindex="-1">SQL <a class="header-anchor" href="#sql" aria-label="Permalink to &quot;SQL&quot;">​</a></h3><h4 id="sql通用语法" tabindex="-1">SQL通用语法 <a class="header-anchor" href="#sql通用语法" aria-label="Permalink to &quot;SQL通用语法&quot;">​</a></h4><ol><li>SQL 语句可以单行或者多行书写，以分号结尾</li><li>SQL 语句可以空格/缩进来增强语句的可读性</li><li>MySQL 数据库的 SQL 语句不区分大小写，关键字建议使用大写</li><li>注释 <ul><li>单行注释：-- 注释内容或 # 注释内容</li><li>多行注释：/* 注释内容 */</li></ul></li></ol><h4 id="sql-分类" tabindex="-1">SQL 分类 <a class="header-anchor" href="#sql-分类" aria-label="Permalink to &quot;SQL 分类&quot;">​</a></h4><table><thead><tr><th>分类</th><th>全称</th><th>说明</th></tr></thead><tbody><tr><td>DDL</td><td>Data Definition Language</td><td>数据定义语言，用来定义数据库对象(数据库，表，字段)</td></tr><tr><td>DML</td><td>Data Manipulation Language</td><td>数据操作语言，用来对数据库表中的数据进行增删改</td></tr><tr><td>DQL</td><td>Data Query Language</td><td>数据查询语言，用来查询数据库中的表的记录</td></tr><tr><td>DCL</td><td>Data Control Language</td><td>数据控制语言，用来创建数据库用户、控制数据库访问权限</td></tr></tbody></table><h4 id="ddl" tabindex="-1">DDL <a class="header-anchor" href="#ddl" aria-label="Permalink to &quot;DDL&quot;">​</a></h4><p><strong>数据库操作</strong></p><p>查询</p><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span># 查询所有数据库</span></span>
<span class="line"><span>SHOW DATABASES;</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 查询当前数据库</span></span>
<span class="line"><span>SELECT DATABASE();</span></span></code></pre></div><p>创建</p><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>CREATE DATABASE [IF NOT EXISTS] 数据库名 [DEFAULT CHARSET 字符集] [COLIATE 排序规则];</span></span></code></pre></div><p>删除</p><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>DROP DATABASE [IF EXISTS] 数据库名;</span></span></code></pre></div><p>使用</p><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>USE 数据库名;</span></span></code></pre></div><p><strong>表操作-查询</strong></p><p>查询当前数据库所有表</p><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>SHOW TABLES;</span></span></code></pre></div><p>查询表结构</p><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>DESC 表名;</span></span></code></pre></div><p>查询指定表的建表语句</p><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>SHOW CREATE TABLE 表名;</span></span></code></pre></div><p><strong>表操作-创建</strong></p><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>CREATE TABLE 表名(</span></span>
<span class="line"><span>	字段1 字段1类型[COMMENT 字段1注释],</span></span>
<span class="line"><span>    字段2 字段2类型[COMMENT 字段2注释],</span></span>
<span class="line"><span>    字段3 字段3类型[COMMENT 字段3注释],</span></span>
<span class="line"><span>    ...</span></span>
<span class="line"><span>    字段n 字段n类型[COMMENT 字段n注释]</span></span>
<span class="line"><span>)[COMMENT 表注释];</span></span></code></pre></div><p><strong>数据类型</strong></p><table><thead><tr><th>类型</th><th>大小</th><th>有符号</th><th>无符号</th><th>描述</th></tr></thead><tbody><tr><td>TINYINT</td><td>1 byte</td><td>(-128, 127)</td><td>(0, 255)</td><td>小整数值</td></tr><tr><td>SMALLINT</td><td>2 byte</td><td>(-32768， 32767)</td><td>(0, 65535)</td><td>大整数值</td></tr><tr><td>MEDIUINT</td><td>3 byte</td><td>(-8388608， 8388607)</td><td>(0, 4294967295)</td><td>大整数值</td></tr><tr><td>INT(INTEGER)</td><td>4 byte</td><td>(-2^63, 2^63-1)</td><td>(0, 2^64-1)</td><td>大整数值</td></tr><tr><td>BIGINT</td><td>8 byte</td><td></td><td></td><td>极大整数值</td></tr><tr><td>FLOAT</td><td>4 byte</td><td></td><td></td><td>单精度浮点数</td></tr><tr><td>DOUBLE</td><td>8 byte</td><td></td><td></td><td>双精度浮点数</td></tr><tr><td>DECIMAL</td><td></td><td>依赖于M(精度)和D(标度)的值</td><td>依赖于M(精度)和D(标度)的值</td><td>小数值(精确定点数)</td></tr></tbody></table><table><thead><tr><th>类型</th><th>大小</th><th>描述</th></tr></thead><tbody><tr><td>CHAR</td><td>0-255 bytes</td><td>定长字符串</td></tr><tr><td>VARCHAR</td><td>0-65535 bytes</td><td>变长字符串</td></tr><tr><td>TINYBLOB</td><td>0-255 bytes</td><td>不超过255个字符的二进制数据</td></tr><tr><td>TINYTEXT</td><td>0-255 bytes</td><td>短文本字符串</td></tr><tr><td>BLOB</td><td>0-65535 bytes</td><td>二进制形式的长文本数据</td></tr><tr><td>TEXT</td><td>0-65535 bytes</td><td>长文本数据</td></tr><tr><td>MEDIUBLOB</td><td>0-16777215 bytes</td><td>二进制形式的中等长度文本数据</td></tr><tr><td>MEDIUTEXT</td><td>0-16777215 bytes</td><td>中等长度文本数据</td></tr><tr><td>LONGBLOB</td><td>0-4294967295 bytes</td><td>二进制形式的极大文本数据</td></tr><tr><td>LONGTEXT</td><td>0-4294967295 bytes</td><td>极大文本数据</td></tr></tbody></table><table><thead><tr><th>类型</th><th>大小</th><th>范围</th><th>格式</th><th>描述</th></tr></thead><tbody><tr><td>DATE</td><td>3</td><td>1000-01-01 至 9999-12-31</td><td>YYYY-MM-DD</td><td>日期值</td></tr><tr><td>TIME</td><td>3</td><td>-838:59:59 至 838:59:59</td><td>HH:MM:SS</td><td>时间值或持续时间</td></tr><tr><td>YEAR</td><td>1</td><td>1901 至 2155</td><td>YYYY</td><td>年份值</td></tr><tr><td>DATETIME</td><td>8</td><td>1000-01-01 00:00:00 至 9999-12-31 23:59:59</td><td>YYYY-MM-DD HH:MM:SS</td><td>混合日期和时间值</td></tr><tr><td>TIMESTAMP</td><td>4</td><td>1970-01-01 00:00:01 至 2038-01-19 03:14:07</td><td>YYYY-MM-DD HH:MM:SS</td><td>混合日期和时间值，时间戳</td></tr></tbody></table><p><strong>表操作</strong></p><p>添加字段</p><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>ALTER 表名 ADD 字段名 类型(长度) [comment 注释] [约束]</span></span></code></pre></div><p>修改数据类型</p><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>ALTER 表名 MODIFT 字段名 新数据类型(长度);</span></span></code></pre></div><p>修改字段名和字段类型</p><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>ALTER TABLE 表名 CHANGE 旧字段名 新字段名 类型(长度) [comment &#39;注释&#39;] [约束];</span></span></code></pre></div><p>删除字段</p><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>ALTER TABLE 表名 DROP 字段名;</span></span></code></pre></div><p>修改表名</p><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>ALTER TABLE 表名 RENAME TO 新表名;</span></span></code></pre></div><p>删除表</p><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>DROP TABLE [IF EXISTS] 表名;</span></span></code></pre></div><p>删除指定表，并重新创建该表</p><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>TRUNCATE TABLE 表名;</span></span></code></pre></div><h4 id="dml" tabindex="-1">DML <a class="header-anchor" href="#dml" aria-label="Permalink to &quot;DML&quot;">​</a></h4><p><strong>添加数据</strong></p><ol><li><p>给指定字段添加数据</p><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>INSERT INTO 表名 (字段1, 字段2...) VALUES (值1, 值2...);</span></span></code></pre></div></li><li><p>给全部字段添加数据</p><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>INSERT INTO VALUES (值1, 值2...);</span></span></code></pre></div></li><li><p>批量添加数据</p><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>INSERT INTO 表名 (字段1, 字段2...) VALUES (值1, 值2...),(值1, 值2...);</span></span></code></pre></div><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>INSERT INTO 表名 VALUES (值1, 值2...),(值1, 值2...);</span></span></code></pre></div></li></ol><p><strong>修改数据</strong></p><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>UPDATE 表名 SET 字段1 = 值1, 字段2 = 值2,... [WHERE 条件];</span></span></code></pre></div><p><strong>删除数据</strong></p><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>DELETE FROM 表名 [WHERE 条件];</span></span></code></pre></div><h4 id="dql" tabindex="-1">DQL <a class="header-anchor" href="#dql" aria-label="Permalink to &quot;DQL&quot;">​</a></h4><p><strong>语法</strong></p><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>SELECT 字段列表</span></span>
<span class="line"><span>FROM 表名列表</span></span>
<span class="line"><span>WHERE 条件列表</span></span>
<span class="line"><span>GROUP BY 分组字段列表</span></span>
<span class="line"><span>c 分组后条件列表</span></span>
<span class="line"><span>ORDER BY 排序字段列表</span></span>
<span class="line"><span>LIMIT 分页参数</span></span></code></pre></div><p><strong>基本查询</strong></p><ol><li><p>查询多个字段</p><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>SELECT 字段1, 字段2, ... FROM 表名;</span></span>
<span class="line"><span>SELECT * FROM 表名；</span></span></code></pre></div></li><li><p>设置别名</p><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>SELECT 字段1 [AS 别名1], 字段2 [AS 别名2], ... 表名;</span></span></code></pre></div></li><li><p>去重</p><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>SELECT DISTINCT 字段列表 FROM 表名;</span></span></code></pre></div></li></ol><p><strong>条件查询</strong></p><ol><li><p>语法</p><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>SELECT 字段列表 FROM 表名 WHERE 条件列表;</span></span></code></pre></div></li><li><p>条件</p><table><thead><tr><th>比较运算符</th><th>功能</th></tr></thead><tbody><tr><td>&gt;</td><td>大于</td></tr><tr><td>&gt;=</td><td>大于等于</td></tr><tr><td>&lt;</td><td>小于</td></tr><tr><td>&lt;=</td><td>小于等于</td></tr><tr><td>=</td><td>等于</td></tr><tr><td>&lt;&gt; 或 !=</td><td>不等于</td></tr><tr><td>BETWEEN...AND...</td><td>在某个范围之间(含最大、最小值)</td></tr><tr><td>IN(...)</td><td>在in之后的列表中的值，多选一</td></tr><tr><td>LIKE 占位符</td><td>模糊匹配(_匹配单个字符，%匹配任意个字符)</td></tr><tr><td>IS NULL</td><td>是 null</td></tr></tbody></table><table><thead><tr><th>逻辑运算符</th><th>功能</th></tr></thead><tbody><tr><td>AND 或 &amp;&amp;</td><td>并且(多个条件同时成立)</td></tr><tr><td>OR 或 ||</td><td>或者(多个条件满足一个)</td></tr><tr><td>NOT 或 ！</td><td>非，不是</td></tr></tbody></table></li></ol><p><strong>聚合函数</strong></p><ol><li><p>介绍：</p><p>将一列数据作为整体，进行纵向计算。</p></li><li><p>常见的聚合函数：</p><table><thead><tr><th>函数</th><th>功能</th></tr></thead><tbody><tr><td>count</td><td>统计数量</td></tr><tr><td>max</td><td>最大值</td></tr><tr><td>min</td><td>最小值</td></tr><tr><td>avg</td><td>平均值</td></tr><tr><td>sum</td><td>求和</td></tr></tbody></table></li><li><p>语法</p><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>SELECT 聚合函数(字段列表) FROM 表名;</span></span></code></pre></div></li></ol><p><strong>分组查询</strong></p><ol><li><p>语法</p><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>SELECT 字段列表 FROM 表名 [where 条件] GROUP BY 分组字段名 [HAVING 分组后过滤条件];</span></span></code></pre></div></li><li><p>where 和 having 去区别：</p><ol><li>执行时机不同：where 是分组之前进行过滤，不满足条件不参与分组；而 having 是分组之后对结果进行过滤。</li><li>判断条件不同：where 不能对聚合函数进行判断，而 having 可以。</li></ol></li></ol><blockquote><p>GROUP_CONCAT([DISTINCT] 要连接的字段 [Order BY ASC/DESC 排序字段] [Separator &#39;分隔符&#39;])</p><p>分组查询中的字段列表，使用某个符号进行分隔</p></blockquote><p><strong>排序查询</strong></p><ol><li><p>语法</p><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>SELECT 字段列表 FROM 表名 ORDER BY 字段1 排序方式1, 字段2 排序方式2;</span></span></code></pre></div></li><li><p>排序方式</p><ol><li>ASC：升序</li><li>DESC：降序</li></ol></li></ol><p><strong>分页查询</strong></p><ol><li><p>语法</p><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>SELECT 字段列表 FROM 表名 LIMIT 起始索引, 查询记录数;</span></span></code></pre></div></li><li><p>注意</p><ol><li>起始索引从0开始，起始索引 = (查询页码 - 1) * 每页显示记录数。</li><li>分页查询是数据库的方言，不同的数据库有不同的实现，MYSQL 中是LIMIT。</li><li>如果查询的是第一页数据，起始索引是可以省略的，直接简写为 limit 10。</li></ol></li></ol><h4 id="dcl" tabindex="-1">DCL <a class="header-anchor" href="#dcl" aria-label="Permalink to &quot;DCL&quot;">​</a></h4><p><strong>用户管理</strong></p><ol><li><p>查询用户</p><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>USE MYSQL;</span></span>
<span class="line"><span>SELECT * FROM user;</span></span></code></pre></div></li><li><p>创建用户</p><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>CREATE USER &#39;用户名&#39;@&#39;主机名&#39; IDENTIFIED BY &#39;密码&#39;;</span></span></code></pre></div></li><li><p>修改用户密码</p><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>ALTER USER &#39;用户名&#39;@&#39;主机名&#39; IDENTIFIED WITH mysql_native_password BY &#39;新密码&#39;;</span></span></code></pre></div></li><li><p>删除用户</p><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>DROP USER &#39;用户名&#39;@&#39;主机名&#39;;</span></span></code></pre></div></li></ol><p><strong>权限管理</strong></p><ol><li><p>常用权限</p><table><thead><tr><th>权限</th><th>功能</th></tr></thead><tbody><tr><td>ALL, ALL PRIVILEGES</td><td>所有权限</td></tr><tr><td>SELECT</td><td>查询数据</td></tr><tr><td>INSERT</td><td>插入数据</td></tr><tr><td>UPDATE</td><td>修改数据</td></tr><tr><td>DELETE</td><td>删除数据</td></tr><tr><td>ALTER</td><td>修改表</td></tr><tr><td>DROP</td><td>删除数据库/表/视图</td></tr><tr><td>CREATE</td><td>创建数据库/表</td></tr></tbody></table></li><li><p>权限控制</p><p>查询权限</p><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>SHOW GRANTS FOR &#39;用户名&#39;@&#39;主机名&#39;;</span></span></code></pre></div><p>授予权限</p><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>GRANT 权限列表 ON 数据库名.表名 TO &#39;用户名&#39;@&#39;主机名&#39;;</span></span></code></pre></div><p>撤销权限</p><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>REVOKE 权限列表 ON 数据库名.表名 FROM &#39;用户名&#39;@&#39;主机名&#39;;</span></span></code></pre></div></li></ol><h3 id="函数" tabindex="-1">函数 <a class="header-anchor" href="#函数" aria-label="Permalink to &quot;函数&quot;">​</a></h3><p>函数是指一段可以直接被另一段程序调用的程序或代码。</p><h4 id="字符串函数" tabindex="-1">字符串函数 <a class="header-anchor" href="#字符串函数" aria-label="Permalink to &quot;字符串函数&quot;">​</a></h4><table><thead><tr><th>函数</th><th>功能</th></tr></thead><tbody><tr><td>CONCAT(S1,S2,...Sn)</td><td>字符串拼接</td></tr><tr><td>LOWER(str)</td><td>将str 转为小写</td></tr><tr><td>UPPER(str)</td><td>将str 转为大写</td></tr><tr><td>LPAD(str,n,pad)</td><td>左填充,用字符串pad对str的左边进行填充，达到n个字符</td></tr><tr><td>RPAD(str,n,pad)</td><td>右填充,用字符串pad对str的右边进行填充，达到n个字符</td></tr><tr><td>TRIM(str)</td><td>去掉字符串前后空格</td></tr><tr><td>SUBSTRING(str,start,len)</td><td>字符串截取</td></tr></tbody></table><h4 id="数值函数" tabindex="-1">数值函数 <a class="header-anchor" href="#数值函数" aria-label="Permalink to &quot;数值函数&quot;">​</a></h4><table><thead><tr><th>函数</th><th>功能</th></tr></thead><tbody><tr><td>CEIL(x)</td><td>向上取整</td></tr><tr><td>FLOOR(x)</td><td>向下取整</td></tr><tr><td>MOD(x,y)</td><td>返回x/y的模</td></tr><tr><td>RAND()</td><td>返回0~1内的随机数</td></tr><tr><td>ROUND(x,y)</td><td>求参数x的四舍五入值，保留y位小数</td></tr></tbody></table><h4 id="日期函数" tabindex="-1">日期函数 <a class="header-anchor" href="#日期函数" aria-label="Permalink to &quot;日期函数&quot;">​</a></h4><table><thead><tr><th>函数</th><th>功能</th></tr></thead><tbody><tr><td>CURDATE()</td><td>返回当前日期</td></tr><tr><td>CURTIME()</td><td>返回当前时间</td></tr><tr><td>NOW()</td><td>返回当前日期和时间</td></tr><tr><td>YEAR(date)</td><td>获取指定date的年份</td></tr><tr><td>MONTH(date)</td><td>获取指定date的月份</td></tr><tr><td>DAY(date)</td><td>获取指定date的日期</td></tr><tr><td>DATE_ADD(date, INTERVAL expr unit)</td><td>返回一个日期/时间值加上一个时间间隔</td></tr><tr><td>DATEDIFF(date1, date2)</td><td>返回两个时间之间的天数</td></tr></tbody></table><p>DATE_ADD()用于指定日期添加时间间隔的函数。 它的语法如下: <code>DATE_ADD(date, INTERVAL expr unit)</code></p><p>date是需要增加（减少）时间的日期， expr是需要增加（减少）的时间数量， unit是需要增加（减少）的时间单位（如天、小时、分钟等）。</p><h4 id="流程控制函数" tabindex="-1">流程控制函数 <a class="header-anchor" href="#流程控制函数" aria-label="Permalink to &quot;流程控制函数&quot;">​</a></h4><table><thead><tr><th>函数</th><th>功能</th></tr></thead><tbody><tr><td>IF(value, t, f)</td><td>如果value为true，则返回t，否则返回f</td></tr><tr><td>IFNULL(value1, value2)</td><td>如果value1不为空，返回value1，否则返回value2</td></tr><tr><td>CASE WHEN [val1] THEN [res1] ... ESLE [default] END</td><td>如果val1为true，返回res1，...否则返回默认值</td></tr><tr><td>CASE [expr] WHEN [val1] THEN [res1] ... ELSE [dafault] END</td><td>如果expr的值等于val1，返回res1, ...否则返回默认值</td></tr></tbody></table><h3 id="约束" tabindex="-1">约束 <a class="header-anchor" href="#约束" aria-label="Permalink to &quot;约束&quot;">​</a></h3><ol><li>概念：约束是作用于表中字段上的规则，用于限制存储在表中的数据。</li><li>目的：保证数据库中的数据正确、有效性和完整性。</li><li>分类：</li></ol><table><thead><tr><th>约束</th><th>描述</th><th>关键字</th></tr></thead><tbody><tr><td>非空约束</td><td>限制字段的数据不能为null</td><td>NOT NULL</td></tr><tr><td>唯一约束</td><td>保证该字段的所有数据都是唯一、不重复的</td><td>UNIQUE</td></tr><tr><td>主键约束</td><td>主键是一行数据的唯一标识，要求非空且唯一</td><td>PRIMARY KTY</td></tr><tr><td>默认约束</td><td>保存数据时，如果未指定该字段的值，则采用默认约束</td><td>DEFAULT</td></tr><tr><td>检查约束</td><td>保证字段值满足某一个条件</td><td>CHECK</td></tr><tr><td>外键约束</td><td>用来让两张表的数据之间建立连接，保证数据一致性和完整性</td><td>FOREIGN KEY</td></tr></tbody></table><p><strong>外键</strong></p><ol><li>添加外键</li></ol><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>CREATE TABLE 表名(</span></span>
<span class="line"><span>	字段名 数据类型,</span></span>
<span class="line"><span>    ...</span></span>
<span class="line"><span>    [CONSTRAINT] [外键名称] FOREIGN KEY(外键字段名) REFERENCES 主表(主列表名)</span></span>
<span class="line"><span>);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>ALERT TABLE 表名 ADD CONSTRAINT 外键名称 FOREIGN KEY(外键字段名) REFERENCES 主表(主列表名);</span></span></code></pre></div><ol start="2"><li>删除外键</li></ol><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>ALERT TABLE 表名 DROP FOREIGN KEY 外键名称;</span></span></code></pre></div><h3 id="多表查询" tabindex="-1">多表查询 <a class="header-anchor" href="#多表查询" aria-label="Permalink to &quot;多表查询&quot;">​</a></h3><h4 id="概述" tabindex="-1">概述 <a class="header-anchor" href="#概述" aria-label="Permalink to &quot;概述&quot;">​</a></h4><p>项目开发中，在进行数据库结构设计时，会根据业务需求及业务模块之间的关系，分析并设计表结构，由于业务之间相互关联，所以各个表之间也存在着各种联系。</p><ul><li>一对多</li><li>多对多</li><li>一对一</li></ul><p>概述：指从多张表中查询数据</p><p>笛卡儿积：笛卡尔乘积是指在数学中，两个集合A集合和B集合的所有组合情况。(在多表查询时，需要消除无效的笛卡尔积)</p><h4 id="分类" tabindex="-1">分类 <a class="header-anchor" href="#分类" aria-label="Permalink to &quot;分类&quot;">​</a></h4><ol><li>连接查询 <ul><li>内连接：相当于查询A、B交集部分数据</li><li>外连接： <ul><li>左外连接：查询左表的所有数据，以及两张表交集部分数据</li><li>右外连接：查询右表的所有数据，以及两张表交集部分数据</li></ul></li><li>自连接：当前表与自身的连接查询，自连接必须使用表别名</li></ul></li><li>子查询</li></ol><p><strong>内连接</strong></p><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span># 隐式内连接</span></span>
<span class="line"><span>SELECT 字段列表 FROM 表1, 表2 WHERE 条件;</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 显示内连接</span></span>
<span class="line"><span>SELECT 字段列表 FROM 表1 [INNER] JOIN 表2 ON 连接条件;</span></span></code></pre></div><p><strong>外连接</strong></p><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span># 左外连接 查询表1数据</span></span>
<span class="line"><span>SELECT 字段列表 FROM 表1 LEFT [OUTER] JOIN 表2 ON 条件;</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 右外连接 查询表2数据</span></span>
<span class="line"><span>SELECT 字段列表 FROM 表1 RIGHT [OUTER] JOIN 表2 ON 条件;</span></span></code></pre></div><p><strong>自连接</strong></p><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>SELECT 字段列表 FROM 表A 别名A JOIN 表A 别名B ON 条件;</span></span></code></pre></div><p><strong>联合查询</strong></p><p>对于联合查询的多张表，列数必须保持一致，字段类型也需要保持一致</p><p>union all 会将全部的数据直接合并，union 会对合并之后的数据去重</p><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>SELECT 字段列表 FROM 表A...</span></span>
<span class="line"><span>UNION [ALL]</span></span>
<span class="line"><span>SELECT 字段列表 FROM 表B...;</span></span></code></pre></div><p><strong>自查询</strong></p><p>概念：SQL 语句中嵌套 SELECT 语句，成为嵌套查询，又称子查询</p><ol><li>标量子查询(子查询结果为单值)</li><li>列子查询(结果为一列)</li><li>行子查询(结果为一行)</li><li>表子查询(结果为多行多列)</li></ol><p>标量子查询</p><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span># 常见操作符 = &lt;&gt; &gt; &gt;= &lt; &lt;=</span></span>
<span class="line"><span>SELECT 字段列表 FROM 表A WHERE (SELECT 字段 FROM 表B WHERE 条件);</span></span></code></pre></div><p>列子查询</p><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span># 常见操作符 IN、 NOT IN、ANY、SOME、ALL</span></span></code></pre></div><p>行子查询</p><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span># 常见操作符 =、&lt;&gt;、IN、NOT IN、</span></span></code></pre></div><p>表子查询</p><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span># 常见操作符 IN</span></span></code></pre></div><h3 id="事务" tabindex="-1">事务 <a class="header-anchor" href="#事务" aria-label="Permalink to &quot;事务&quot;">​</a></h3><h4 id="事务操作" tabindex="-1">事务操作 <a class="header-anchor" href="#事务操作" aria-label="Permalink to &quot;事务操作&quot;">​</a></h4><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span># 方法一</span></span>
<span class="line"><span># 事务自动提交</span></span>
<span class="line"><span>select @@autocommit;</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 事务设置</span></span>
<span class="line"><span>set @@autocommit = 1;</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 提交事务</span></span>
<span class="line"><span>commit;</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 回滚事务</span></span>
<span class="line"><span>rollback;</span></span></code></pre></div><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span># 方法二</span></span>
<span class="line"><span># 开启事务</span></span>
<span class="line"><span>start transaction 或 begin;</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 提交事务</span></span>
<span class="line"><span>commit;</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 回滚事务</span></span>
<span class="line"><span>rollback;</span></span></code></pre></div><h4 id="事务四大特性" tabindex="-1">事务四大特性 <a class="header-anchor" href="#事务四大特性" aria-label="Permalink to &quot;事务四大特性&quot;">​</a></h4><ul><li>原子性：事务时不可分隔的最小操作单元，要么全部成功，要么全部失败。</li><li>一致性：事务完成时，必须使所有的数据都保持一致。</li><li>隔离性：数据库系统提交的隔离机制，保证事务在不受外部并发操作影响的独立环境下进行。</li><li>持久性：事务一旦提交或回滚，他对数据哭中数据的改变就是永久的。</li></ul><h4 id="事务并发问题" tabindex="-1">事务并发问题 <a class="header-anchor" href="#事务并发问题" aria-label="Permalink to &quot;事务并发问题&quot;">​</a></h4><ul><li>脏读：一个事务读到另一个事务还没有提交的数据。</li><li>不可重复读：一个事务先后读取同一条数据，但两次读取的数据不同，称之为不可重复读。</li><li>幻读：一个事务按照条件查询数据时，没有对应的数据行，但是在插入数据时，又发现这行数据存在，好像出现了幻影。</li></ul><h4 id="事务隔离级别" tabindex="-1">事务隔离级别 <a class="header-anchor" href="#事务隔离级别" aria-label="Permalink to &quot;事务隔离级别&quot;">​</a></h4><table><thead><tr><th>隔离级别</th><th>脏读</th><th>不可重复读</th><th>幻读</th></tr></thead><tbody><tr><td>Read uncommitted</td><td>✔</td><td>✔</td><td>✔</td></tr><tr><td>Read committed</td><td>✘</td><td>✔</td><td>✔</td></tr><tr><td>Repeatable（默认）</td><td>✘</td><td>✘</td><td>✔</td></tr><tr><td>Serializable</td><td>✘</td><td>✘</td><td>✘</td></tr></tbody></table><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span># 查看隔离级别</span></span>
<span class="line"><span>select @@transaction_isolation;</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 设置隔离级别</span></span>
<span class="line"><span>set [session | global] transaction isolation level { 隔离级别 }</span></span></code></pre></div><h2 id="进阶" tabindex="-1">进阶 <a class="header-anchor" href="#进阶" aria-label="Permalink to &quot;进阶&quot;">​</a></h2><h3 id="存储引擎" tabindex="-1">存储引擎 <a class="header-anchor" href="#存储引擎" aria-label="Permalink to &quot;存储引擎&quot;">​</a></h3><h4 id="mysql-体系结构" tabindex="-1">MySQL 体系结构 <a class="header-anchor" href="#mysql-体系结构" aria-label="Permalink to &quot;MySQL 体系结构&quot;">​</a></h4><ul><li>连接层</li><li>服务层</li><li>引擎层</li><li>存储层</li></ul><h4 id="存储引擎简介" tabindex="-1">存储引擎简介 <a class="header-anchor" href="#存储引擎简介" aria-label="Permalink to &quot;存储引擎简介&quot;">​</a></h4><p>存储引擎就是存储数据、建立索引、更新/查询数据等技术的实现方式。存储引擎事基于表的，而并不是基于库的，所以存储引擎可也呗成为表引擎。</p><p><strong>创建表时选择存储引擎</strong></p><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>CREATE TABLE 表名(</span></span>
<span class="line"><span>	...	</span></span>
<span class="line"><span>) ENGINE=INNODB;</span></span></code></pre></div><p><strong>查看当前数据库支持的存储引擎</strong></p><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>SHOW ENGINES;</span></span></code></pre></div><h4 id="存储引擎特点" tabindex="-1">存储引擎特点 <a class="header-anchor" href="#存储引擎特点" aria-label="Permalink to &quot;存储引擎特点&quot;">​</a></h4><ul><li>InnoDB <ul><li>介绍：InnoDB是一种兼顾高可靠性和高性能的通用存储引擎</li><li>特点 <ul><li>DML操作遵从ACID模型，支持事务</li><li>行级锁，提高并发访问性能</li><li>支持外键约束，保证数据的完整性和正确性</li></ul></li><li>文件：xxx.ibd，xxx表示表名，InnoDB引擎的每张表都会对应这样的一个表空间，存储该表的表结构、数据和索引</li></ul></li><li>MyISAM <ul><li>介绍：MyISAM是MySQL在早期的默认存储引擎</li><li>特点 <ul><li>不支持事务，不支持外键</li><li>支持表锁，不支持行锁</li><li>访问速度快</li></ul></li><li>文件 <ul><li>xxx.sdi：存储表结构信息</li><li>xxx.MYD：存储数据</li><li>xxx.MYI：存储索引</li></ul></li></ul></li><li>Memory <ul><li>介绍：Memory引擎的表数据是存储在内存中的，由于受到硬件问题或断电问题的影响，只能讲这些表作为临时表或缓存使用。</li><li>特点 <ul><li>内存存放</li><li>hashsuoy</li></ul></li><li>文件：xxx.sdi：存储表结构信息</li></ul></li></ul><h4 id="存储引擎选择" tabindex="-1">存储引擎选择 <a class="header-anchor" href="#存储引擎选择" aria-label="Permalink to &quot;存储引擎选择&quot;">​</a></h4><ol><li>InnoDB：是Mysql默认的存储引擎，支持事务，外键。如果应用对事务的完整性有比较高的要求，在并发条件下要求数据的一致性，数据操作除了插入和查询之外，还包含很多的更新、删除操作，那么InnoDB村粗引擎比较合适。</li><li>MyISAM：如果应用事宜读操作和插入操作为主，只有很少的更新和删除，并且对事务的完整性、并发性要求不高</li><li>Memory：将所有数据保存在内存中，访问速度快，通常用于临时表及缓存，Memory的缺陷是对表的大小有限制，太大的表无法缓存在内存中，而且无法保障数据的安全性。</li></ol><h3 id="索引" tabindex="-1">索引 <a class="header-anchor" href="#索引" aria-label="Permalink to &quot;索引&quot;">​</a></h3><p>索引的帮助MySQL 高效获取数据的数据结构。在数据之外，数据库系统还维护着满足特定查找算法的数据结构，这些数据结构以某种方式引用(指向)数据，这样就可以在这些数据结构上实现高级查找算法，这种数据结构就是索引。</p><h4 id="优缺点" tabindex="-1">优缺点 <a class="header-anchor" href="#优缺点" aria-label="Permalink to &quot;优缺点&quot;">​</a></h4><ul><li>优势 <ul><li>提高数据检索效率，降低数据库的IO成本</li><li>通过索引对数据进行排序，降低数据排序的成本，降低CPU的消耗。</li></ul></li><li>劣势 <ul><li>索引列也是要占用空间的</li><li>索引大大提高了查询效率，同时却也降低更新表的速度，如对表进行INSERT，UPDATE，DELETE，效率降低。</li></ul></li></ul><h4 id="索引结构" tabindex="-1">索引结构 <a class="header-anchor" href="#索引结构" aria-label="Permalink to &quot;索引结构&quot;">​</a></h4><table><thead><tr><th>索引结构</th><th>描述</th></tr></thead><tbody><tr><td>B+Tree索引</td><td>最常见的索引类型，大部分引擎都支持B+索引</td></tr><tr><td>Hash索引</td><td>底层数据结构是用哈希表实现的，只有精确匹配索引列的查询才有效，不支持范围查询</td></tr><tr><td>R-Tree(空间索引)</td><td>空间索引是MyISAM引擎的一个特殊索引类型，主要用于地理空间数据类型</td></tr><tr><td>Full-text(全文索引)</td><td>是一种通过建立倒排索引，快速匹配文档的方式</td></tr></tbody></table><h4 id="索引分类" tabindex="-1">索引分类 <a class="header-anchor" href="#索引分类" aria-label="Permalink to &quot;索引分类&quot;">​</a></h4><table><thead><tr><th>分类</th><th>含义</th><th>特点</th><th>关键字</th></tr></thead><tbody><tr><td>主键索引</td><td>针对于表中主键创建的索引</td><td>默认自动创建，只能有一个</td><td>PRIMARY</td></tr><tr><td>唯一索引</td><td>避免同一个表中某数据列中的值重复</td><td>可以有多个</td><td>UNIQUE</td></tr><tr><td>常规索引</td><td>快速定位特点数据</td><td>可以有多个</td><td></td></tr><tr><td>全文索引</td><td>全文索引查找的是文本中的关键词，而不是比较索引中的值</td><td>可以有多个</td><td>FULLTEXT</td></tr></tbody></table><table><thead><tr><th>分类</th><th>含义</th><th>特点</th></tr></thead><tbody><tr><td>聚焦索引</td><td>将数据存储与索引放到了一块，索引结构的叶子节点保存了行数据</td><td>必须有，而且只有一个</td></tr><tr><td>二级索引</td><td>将数据与索引分开存储，索引结构的叶子节点关联的是对应主键</td><td>可以存在多个</td></tr></tbody></table><h4 id="索引语法" tabindex="-1">索引语法 <a class="header-anchor" href="#索引语法" aria-label="Permalink to &quot;索引语法&quot;">​</a></h4><p><strong>创建索引</strong></p><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>CREATE [UNIQUE | FULLTEXT] INDEX index_name ON table_name (index_col_name);</span></span></code></pre></div><p><strong>查看索引</strong></p><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>SHOW INDEX FROM table_name;</span></span></code></pre></div><p><strong>删除索引</strong></p><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>DROP INDEX index_name ON table_name;</span></span></code></pre></div><h4 id="sql性能分析" tabindex="-1">SQL性能分析 <a class="header-anchor" href="#sql性能分析" aria-label="Permalink to &quot;SQL性能分析&quot;">​</a></h4><ul><li><p>SQL执行频率</p><p>MySQL 客户端连接成功后，通过 show [session | global] status 命令可以提供服务器状态信息。</p><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>SHOW GLOBAL STATUS LIKE &#39;Com_______&#39;</span></span></code></pre></div></li><li><p>慢查询日志</p><p>慢查询日志记录了所有执行时间超过指定参数(long_query_time, 单位秒，默认10秒)的所有SQL语句的日志</p><p>MySQL默认没有开启，需要自行开启。</p></li><li><p>profile详情</p><p>show profile 能够在SQL优化时帮助我们了解时间都耗费到哪里去了。通过have_profile参数，能够看到当前MySQL是profile操作：</p><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>SELECT @@have_profile;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>SHOW PROFILES；</span></span></code></pre></div></li><li><p>explain执行计划</p><p>EXPLAIN或者 EDSC命令获取 MySQL如何执行SELECT语句的信息，包括在SELECT语句执行过程中表如何连接和连接的顺序。</p><div class="language-mysql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mysql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>EXPLAIN SELECT 字段列表 FROM 表名 WHERE 条件;</span></span></code></pre></div></li></ul></div></div></main><footer class="VPDocFooter" data-v-39a288b8 data-v-09de1c0f><!--[--><!--]--><!----><nav class="prev-next" data-v-09de1c0f><div class="pager" data-v-09de1c0f><a class="VPLink link pager-link prev" href="/note/nest.html" data-v-09de1c0f><!--[--><span class="desc" data-v-09de1c0f>上一页</span><span class="title" data-v-09de1c0f>Nest</span><!--]--></a></div><div class="pager" data-v-09de1c0f><a class="VPLink link pager-link next" href="/note/rust.html" data-v-09de1c0f><!--[--><span class="desc" data-v-09de1c0f>下一页</span><span class="title" data-v-09de1c0f>Rust</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-5d98c3a5 data-v-e315a0ad><div class="container" data-v-e315a0ad><p class="message" data-v-e315a0ad>Released under the MIT License.</p><p class="copyright" data-v-e315a0ad>Copyright © 2023-present Bin</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"blog_2022-05-28.md\":\"ltqW7cO9\",\"note_fetch.md\":\"DQZHjpGb\",\"blog_2023-04-16.md\":\"DY-72Wk9\",\"note_git.md\":\"C6juwtCz\",\"index.md\":\"M0S0B-Vz\",\"blog_2023-09-06.md\":\"DZz2Fotz\",\"interview_css.md\":\"BSlKUUzw\",\"note_sass.md\":\"DCkhQ1p1\",\"note_vue2.md\":\"DVrITVKQ\",\"note_axios.md\":\"Df0EPEy8\",\"note_mysql.md\":\"BvOVuuF9\",\"note_nest.md\":\"D-kIaKna\",\"note_webpack.md\":\"COqXOTcN\",\"blog_2023-07-25.md\":\"9yhidtRk\",\"note_regexp.md\":\"BS4FNVoI\",\"interview_vue.md\":\"cfdNKH5L\",\"note_ajax.md\":\"BxmP-rqL\",\"note_uniapp.md\":\"BbuYip3i\",\"interview_html.md\":\"DbGY-lRj\",\"note_less.md\":\"CrRKLbRs\",\"interview_javascript.md\":\"ht_UKJjk\",\"note_vue3.md\":\"rHkS2RuZ\",\"blog_2023-05-17.md\":\"CYyQ7y4s\",\"note_ts.md\":\"DRAVAgKR\",\"note_rust.md\":\"xpPlevHr\",\"note_react.md\":\"4GK-8i1_\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"不要额外加糖\",\"description\":\"专门收集本人的学习笔记\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"logo\":\"./static/img/favicon.ico\",\"search\":{\"provider\":\"local\",\"options\":{\"translations\":{\"button\":{\"buttonText\":\"搜索文档\",\"buttonAriaLabel\":\"搜索文档\"},\"modal\":{\"noResultsText\":\"无法找到相关结果\",\"resetButtonTitle\":\"清除查询条件\",\"footer\":{\"selectText\":\"选择\",\"navigateText\":\"切换\",\"closeText\":\"关闭\"}}}}},\"docFooter\":{\"prev\":\"上一页\",\"next\":\"下一页\"},\"outline\":{\"label\":\"当前目录\"},\"nav\":[{\"text\":\"首页\",\"link\":\"/\"},{\"text\":\"个人博客\",\"link\":\"/blog/2022-05-28\"}],\"sidebar\":{\"/interview/\":[{\"text\":\"基础面试题\",\"items\":[{\"text\":\"HTML\",\"link\":\"../interview/html\"},{\"text\":\"CSS\",\"link\":\"../interview/css\"},{\"text\":\"JS\",\"link\":\"../interview/javascript\"},{\"text\":\"Vue\",\"link\":\"../interview/vue\"}]}],\"/note/\":[{\"text\":\"读书笔记\",\"items\":[{\"text\":\"Ajax\",\"link\":\"../note/ajax\"},{\"text\":\"Axios\",\"link\":\"../note/axios\"},{\"text\":\"Fetch\",\"link\":\"../note/fetch\"},{\"text\":\"Git\",\"link\":\"../note/git\"},{\"text\":\"Less\",\"link\":\"../note/less\"},{\"text\":\"Sass\",\"link\":\"../note/sass\"},{\"text\":\"Regexp\",\"link\":\"../note/regexp\"},{\"text\":\"Webpack\",\"link\":\"../note/webpack\"},{\"text\":\"Uni-app\",\"link\":\"../note/uniapp\"},{\"text\":\"Ts\",\"link\":\"../note/ts\"},{\"text\":\"Vue2\",\"link\":\"../note/vue2\"},{\"text\":\"Vue3\",\"link\":\"../note/vue3\"},{\"text\":\"React\",\"link\":\"../note/react\"},{\"text\":\"Nest\",\"link\":\"../note/nest\"},{\"text\":\"Mysql\",\"link\":\"../note/mysql\"},{\"text\":\"Rust\",\"link\":\"../note/rust\"}]}],\"/blog\":[{\"text\":\"个人博客\",\"items\":[{\"text\":\"节流和防抖\",\"link\":\"../blog/2022-05-28\"},{\"text\":\"Object.defineProperty&Proxy\",\"link\":\"../blog/2023-04-16\"},{\"text\":\"vue.js 设计与实现\",\"link\":\"../blog/2023-05-17\"},{\"text\":\"vue2 封装 Echarts\",\"link\":\"../blog/2023-07-25\"},{\"text\":\"ts 内置函数\",\"link\":\"../blog/2023-09-06\"}]}]},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/ffgenius\"}],\"footer\":{\"message\":\"Released under the MIT License.\",\"copyright\":\"Copyright © 2023-present Bin\"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>